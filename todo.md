# CFA Level I 単語帳アプリ - TODO

## データ層
- [x] データスキーマ定義（types.ts）
- [ ] CSVインポート機能
- [x] QA検証ロジック
- [x] AsyncStorageによるローカル保存
- [x] サンプルCSVデータの組み込み

## 学習モード
- [x] 一覧画面（縦積みリスト）
- [x] 検索機能
- [x] フィルター（科目/タグ/未学習/要復習）
- [ ] 並び替え機能
- [x] 詳細画面
- [x] 関連語へのナビゲーション
- [x] SRS復習機能（SM-2アルゴリズム）
- [x] 学習履歴の保存

## クイズモード
- [x] 出題設定画面
- [x] 四択問題生成
- [x] 入力式問題
- [x] 穴埋め問題
- [x] 結果画面
- [x] 苦手語の自動抽出

## UI/UX
- [x] テーマカラー設定
- [x] TermCardコンポーネント
- [ ] TermDetailViewコンポーネント
- [ ] QuizOptionコンポーネント
- [x] タブナビゲーション設定
- [x] アイコンマッピング

## その他
- [x] アプリアイコン生成
- [x] Ankiエクスポート機能
- [ ] バックアップ/復元機能
- [x] ドキュメント作成


## 株式投資用語30語追加
- [x] CFA Level I 株式投資分野の高頻出用語30語を調査
- [x] 新規30語のデータ作成（定義・例文・関連語）
- [x] JSONデータの更新
- [x] QA検証
- [x] アプリのテスト

## 機能改善（2025-01-04）
- [x] トップページの単語数表示バグ修正（EQが20語と表示される問題）
- [x] 英語→日本語クイズモードの追加
- [x] 忘却曲線（SRS）の強化・可視化
- [x] GitHubリポジトリへの共有

## RPG風ミニゲーム追加（2025-01-04）
- [x] ゲームデータモデル設計（カード・プレイヤー・敵・バトル状態）
- [x] カードシステム実装（難易度別攻撃力・回復力）
- [x] バトルシステム実装（ターン制・HP管理）
- [x] カード使用時クイズ連動（正解で効果発動、不正解で逆ダメージ）
- [x] ゲームUI（ホーム・バトル画面・カード一覧）
- [x] 学習ログ連携（ゲーム内クイズも記録）
- [x] 忘却曲線管理への統合
- [x] タブナビゲーションにゲームタブ追加
- [x] GitHubへの共有

## ゲーム改善（2025-01-04）
- [x] 株式投資（EQ）から始められるようにステージ設定を変更
- [x] 単語・概念を後から追加しやすい拡張可能なデータ構造に整理
- [x] クイズの選択肢改善（英語または日本語のみ表示）
- [x] 概念説明クイズの追加（定義を問う問題タイプ）
- [x] ゲームタブにロゴを表示
- [x] GitHubへの共有

### 手札・デッキシステム改善（2025-01-04）
- [x] カード枚数のリアルタイム更新（バトル終了後に即時反映）
- [x] 手札・デッキシステムの導入
  - [x] デッキ（所持カードから選択、レベルで上限増加）
  - [x] 手札（バトル中にデッキからランダムX枚引く）
  - [x] レベルアップで手札上限・デッキ上限が増加
- [x] バトル画面の手札システム対応
- [x] GitHubへの共有
- [x] デッキ画面のカード枚数反映バグ修正
- [x] バースト機能の追加（2枚同時使用で高難度クイズ、成功で大ダメージ）
## ゲーム機能拡張（2025-01-04）

- [x] デッキ画面のバグ修正（5枚以上追加できない問題）
- [x] 問題文の全文表示機能（(see all)ボタン追加）
- [x] ゴールドシステムの実装（敵を倒すとゴールド獲得）
- [x] アイテムシステムの実装
  - [x] 「Schwの力」アイテム（CFA実問正解でEXP10倍）
- [x] CFA実問ストックの作成（12問、拡張可能な構造）
- [x] カード強化システムの実装（ゴールドで強化、難易度上昇でレアリティアップ）
- [x] GitHubへの共有
- [x] ゲーム内クイズの学習履歴をアプリ全体に反映（忘却曲線の復習対象に追加）

## バグ修正（2025-01-04）
- [x] 問題文の省略問題を修正（全文表示機能が正しく動作するように）
- [x] 手札の自動補充機能を追加（カード使用後に山札から1枚補充）
- [x] バーストクイズ正解後に画面が止まるバグを修正

## 新機能追加（2025-01-04）
- [x] ボス戦システムの実装
  - [x] 各ステージにボスを配置
  - [x] ボス専用の強力なステータス
  - [x] ボス撃破で限定カード獲得
- [x] デイリーミッションシステムの実装
  - [x] 毎日リセットされるミッション
  - [x] ミッション達成でボーナス報酬
  - [x] 複数のミッションタイプ
- [x] カード合成システムの実装
  - [x] 同じカードを複数集めて合成
  - [x] 合成で上位レアリティに進化
  - [x] 合成UIの作成

## Androidビルドエラー修正（2025-01-04）
- [x] minSdkVersion互換性問題を修正（ReactAndroid/hermestoolingがSDK 24を要求）

## カード強化・合成バグ修正（2025-01-04）
- [x] カード強化が反映されない・お金が減らないバグを修正
- [x] カード合成でカードが強化されないバグを修正
- [x] 複数枚同時合成ができないバグを修正
- [x] 「Schwの力」をボス戦でも使用可能にする

## 忘却曲線連携バグ修正（2025-01-04）
- [x] ゲーム内クイズの回答を忘却曲線システムに反映させる

## カード強化・合成バグ修正（2025-01-06）
- [x] カード強化でお金が減らない・能力が上がらないバグを修正
- [x] カード合成でレアリティが上がらないバグを修正（確率制、デバッグログ追加）

## 合成・強化UI改善（2025-01-06）
- [x] レアリティアップ確率を合成前に表示
- [x] 合成結果（成功/失敗）をわかりやすく表示
- [x] 強化履歴をカード詳細に表示
- [x] 合成確率アップアイテムを実装
- [x] 合成画面で直接アイテム購入可能に

## バックエンド公開エラー調査（2025-01-06）
- [ ] サーバーログを確認してエラーを特定
- [ ] バックエンドサービスの公開問題を修正


## Equity単語集からの用語追加（2025-01-07）
- [x] PDFから用語を抽出
- [x] 現在のアプリの用語と比較
- [x] 未搭載用語をアプリに追加（155語追加）
- [x] テスト実行（全43テスト合格）

## 敵キャラクタースプライトアニメーション実装（2025-01-07）
- [x] PERスライムのスプライトシートを切り出し（16フレーム）
- [x] アニメーションコンポーネントの作成（EnemySprite）
- [x] バトル画面への統合
- [x] アイドル・攻撃・ダメージ・死亡アニメーションの実装

## スプライト切り出し修正（2025-01-07）
- [x] グリッド線を除外してスプライトを再切り出し（2pxパディングでグリッド線回避）
- [x] 透過背景を正しく処理

## 敵キャラ追加とエフェクト実装（2025-01-07）
- [x] ゴブリン・ゴーレム・ファントムのスプライト切り出し（12フレームx3体）
- [x] エフェクト素材（hit/slash/explosion/fire/ice/spark）の切り出し（18フレーム）
- [x] 敵スプライトコンポーネントの拡張（4体対応 + エフェクト）
- [x] 敵の攻撃モーションとダメージエフェクトの実装
- [x] プレイヤーへのダメージ演出の追加

## スプライト切り出し・透過処理の根本修正（2025-01-07）
- [x] スプライトシートのグリッド線を正確に検出
- [x] グリッド線を完全に除去した切り出し処理（4pxパディング）
- [x] 背景の透過処理（白/グレー背景を透明に）
- [x] 全スプライト（スライム・ゴブリン・ゴーレム・ファントム）52フレーム）の再切り出し
- [x] エフェクト素材の再切り出し（18フレーム）

## 復習必要単語の優先出題機能（2025-01-07）
- [x] 「復習が必要です」ボタンの現在の動作を確認
- [x] 復習期限を過ぎた単語を優先して出題するロジックを実装
- [x] クイズモードへの遷移時にフィルタリングを適用

## 忘却曲線アルゴリズム改善（2025-01-07）
- [x] SM2アルゴリズムの改良（学習ステップ対応：1分【10分、1日）
- [x] FSRS風アルゴリズムの実装（S/D/Rに基づく適応型）
- [x] 設定画面でアルゴリズム選択機能を追加
- [x] 復習画面のUI更新（学習初期の短いスパン対応）
- [x] アルゴリズム説明の表示機能

## 例文の更新（2025-01-07）
- [x] 提供された単語集と例文集を確認（187語の例文を抽出）
- [x] 現在の例文データでテンプレート化されたものを特定（30件の日本語訳欠落）
- [x] 株式（EQ）分野を中心に例文を実際の例文に置き換え（156件更新、6件日本語追加）
- [x] 更新後のデータ検証とテスト（18テスト合格）

## 例文補完と音声機能（2025-01-07）
- [x] 残り24件の例文の日本語訳を追加
- [x] 音声読み上げ機能の実装（expo-speech使用）
- [x] 例文画面に音声再生ボタンを追加
- [x] テストと検証（70テスト合格）

## GitHub同期とドキュメント化（2025-01-07）
- [ ] 設計思想とアーキテクチャのドキュメント作成
- [ ] GitHubリポジトリのクローンと設定
- [ ] コードとデータの同期
- [ ] GitHubへのプッシュと検証

## バグ修正（2025-01-07）
- [x] 復習完了後に「復習が必要です」の表示を更新（useFocusEffect使用）
- [x] 敵キャラクター画像の読み込みラグを解消（expo-image使用）
- [x] ゴブリン等の画像が表示されない問題を修正（キャッシュ設定）
- [x] テストと検証

## テキスト理解モードと例題モードの実装（2025-01-07）
- [x] Equity Investments PDFの内容分析と単元構造の設計
- [x] テキスト理解データの抽出と構造化（サンプルJSON作成）
- [x] 例題データの抽出と日本語訳・解説作成（サンプル1問）
- [x] データモデルとSRS統合の実装（TextbookStore作成）
- [x] テキスト理解モードのUI実装（科目・Reading・テキスト画面）
- [x] 例題モードのUI実装（例題詳細画面）
- [x] 将来的な拡張性を考慮した設計（Subject/Reading/Content構造）
- [ ] テストとGitHubプッシュ

## Equity Investments PDFからのデータ抽出（2025-01-08）
- [x] PDFから全テキストと例題を抽出（Reading 1-2）
- [x] 抽出データの構造化とJSON変換
- [x] 日本語訳と解説の追加
- [ ] .gitignoreにデータファイルを追加（非公開設定）
- [x] アプリへのデータ統合とテスト
- [ ] GitHubプッシュ

## Equity Investments Reading 3-5の追加（2025-01-08）
- [x] PDFからReading 3の構造を分析
- [x] Reading 3のテキストと例題を抽出
- [x] Reading 4-5の構造を分析
- [x] Reading 4-5のテキストと例題を抽出
- [x] JSONデータの作成と日本語翻訳
- [x] アプリへの統合とテスト
- [ ] GitHubプッシュ
