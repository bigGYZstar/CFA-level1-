/**
 * Reading 5: Company Analysis: Past and Present
 * CFA Level I - Equity Investments
 */

import { TextContent, ExampleProblem, ReadingInfo, SubjectCode } from '@/lib/textbook-types';

const SUBJECT: SubjectCode = 'EQ';
const READING_CODE = 'CAP';
const READING_TITLE = 'Company Analysis: Past and Present';
const READING_TITLE_JA = '企業分析：過去と現在';

/**
 * Reading情報
 */
export const reading5Info: ReadingInfo = {
  id: `${SUBJECT}_${READING_CODE}`,
  subject: SUBJECT,
  code: READING_CODE,
  title: READING_TITLE,
  titleJa: READING_TITLE_JA,
  description: 'This reading covers company analysis including industry analysis, competitive analysis, and financial statement analysis.',
  descriptionJa: '業界分析、競争分析、財務諸表分析を含む企業分析について学習します。',
  order: 5,
  totalSections: 8,
  totalExamples: 5,
};

/**
 * テキストコンテンツ（セクション）
 */
export const reading5Texts: TextContent[] = [
  {
    id: `${SUBJECT}_${READING_CODE}_1`,
    subject: SUBJECT,
    reading: READING_CODE,
    readingTitle: READING_TITLE,
    readingTitleJa: READING_TITLE_JA,
    section: '1',
    title: 'Introduction to Company Analysis',
    titleJa: '企業分析の概要',
    content: 'Company analysis involves evaluating a companys business model, competitive position, financial performance, and future prospects. It is essential for equity valuation and investment decision-making.',
    contentJa: '企業分析は、企業のビジネスモデル、競争上の地位、財務パフォーマンス、将来の見通しを評価することを含みます。株式バリュエーションと投資意思決定に不可欠です。',
    keyPoints: [
      'Company analysis is essential for equity valuation',
      'It involves both qualitative and quantitative analysis',
      'Understanding the business model is fundamental',
    ],
    keyPointsJa: [
      '企業分析は株式バリュエーションに不可欠',
      '定性分析と定量分析の両方を含む',
      'ビジネスモデルの理解が基本',
    ],
    checkQuestions: [
      {
        id: `${SUBJECT}_${READING_CODE}_1_Q1`,
        contentId: `${SUBJECT}_${READING_CODE}_1`,
        question: 'What are the main components of company analysis?',
        questionJa: '企業分析の主な構成要素は何ですか？',
        answer: 'Business model, competitive position, financial performance, and future prospects.',
        answerJa: 'ビジネスモデル、競争上の地位、財務パフォーマンス、将来の見通し。',
        order: 1,
      },
    ],
    order: 1,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: `${SUBJECT}_${READING_CODE}_2`,
    subject: SUBJECT,
    reading: READING_CODE,
    readingTitle: READING_TITLE,
    readingTitleJa: READING_TITLE_JA,
    section: '2',
    title: 'Industry Analysis',
    titleJa: '業界分析',
    content: 'Industry analysis examines the structure and dynamics of the industry in which a company operates. Key frameworks include Porters Five Forces (threat of new entrants, bargaining power of suppliers, bargaining power of buyers, threat of substitutes, and rivalry among existing competitors).',
    contentJa: '業界分析は、企業が事業を行う業界の構造とダイナミクスを調べます。主要なフレームワークにはポーターのファイブフォース（新規参入の脅威、サプライヤーの交渉力、買い手の交渉力、代替品の脅威、既存競合他社間の競争）があります。',
    keyPoints: [
      'Porters Five Forces is a key framework',
      'Industry structure affects profitability',
      'Barriers to entry protect existing firms',
    ],
    keyPointsJa: [
      'ポーターのファイブフォースは主要なフレームワーク',
      '業界構造は収益性に影響する',
      '参入障壁は既存企業を保護する',
    ],
    checkQuestions: [
      {
        id: `${SUBJECT}_${READING_CODE}_2_Q1`,
        contentId: `${SUBJECT}_${READING_CODE}_2`,
        question: 'What are Porters Five Forces?',
        questionJa: 'ポーターのファイブフォースとは何ですか？',
        answer: 'Threat of new entrants, bargaining power of suppliers, bargaining power of buyers, threat of substitutes, and rivalry among existing competitors.',
        answerJa: '新規参入の脅威、サプライヤーの交渉力、買い手の交渉力、代替品の脅威、既存競合他社間の競争。',
        order: 1,
      },
    ],
    order: 2,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: `${SUBJECT}_${READING_CODE}_3`,
    subject: SUBJECT,
    reading: READING_CODE,
    readingTitle: READING_TITLE,
    readingTitleJa: READING_TITLE_JA,
    section: '3',
    title: 'Competitive Analysis',
    titleJa: '競争分析',
    content: 'Competitive analysis evaluates a companys competitive position relative to its peers. Key concepts include competitive advantage (cost leadership, differentiation), sustainable competitive advantage (economic moat), and market share analysis.',
    contentJa: '競争分析は、同業他社に対する企業の競争上の地位を評価します。主要な概念には、競争優位性（コストリーダーシップ、差別化）、持続可能な競争優位性（経済的堀）、市場シェア分析があります。',
    keyPoints: [
      'Competitive advantage can be cost-based or differentiation-based',
      'Economic moat refers to sustainable competitive advantage',
      'Market share indicates competitive position',
    ],
    keyPointsJa: [
      '競争優位性はコストベースまたは差別化ベース',
      '経済的堀は持続可能な競争優位性を指す',
      '市場シェアは競争上の地位を示す',
    ],
    checkQuestions: [
      {
        id: `${SUBJECT}_${READING_CODE}_3_Q1`,
        contentId: `${SUBJECT}_${READING_CODE}_3`,
        question: 'What is an economic moat?',
        questionJa: '経済的堀とは何ですか？',
        answer: 'A sustainable competitive advantage that protects a company from competitors.',
        answerJa: '競合他社から企業を保護する持続可能な競争優位性。',
        order: 1,
      },
    ],
    order: 3,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: `${SUBJECT}_${READING_CODE}_4`,
    subject: SUBJECT,
    reading: READING_CODE,
    readingTitle: READING_TITLE,
    readingTitleJa: READING_TITLE_JA,
    section: '4',
    title: 'Financial Statement Analysis',
    titleJa: '財務諸表分析',
    content: 'Financial statement analysis involves examining a companys income statement, balance sheet, and cash flow statement. Key techniques include ratio analysis (profitability, liquidity, solvency, efficiency), trend analysis, and common-size analysis.',
    contentJa: '財務諸表分析は、企業の損益計算書、貸借対照表、キャッシュフロー計算書を調べることを含みます。主要な手法には、比率分析（収益性、流動性、支払能力、効率性）、トレンド分析、共通サイズ分析があります。',
    keyPoints: [
      'Three main financial statements are analyzed',
      'Ratio analysis provides insights into performance',
      'Trend analysis shows changes over time',
    ],
    keyPointsJa: [
      '3つの主要な財務諸表を分析',
      '比率分析はパフォーマンスへの洞察を提供',
      'トレンド分析は時間の経過による変化を示す',
    ],
    checkQuestions: [
      {
        id: `${SUBJECT}_${READING_CODE}_4_Q1`,
        contentId: `${SUBJECT}_${READING_CODE}_4`,
        question: 'What are the main categories of financial ratios?',
        questionJa: '財務比率の主なカテゴリは何ですか？',
        answer: 'Profitability, liquidity, solvency, and efficiency ratios.',
        answerJa: '収益性、流動性、支払能力、効率性の比率。',
        order: 1,
      },
    ],
    order: 4,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: `${SUBJECT}_${READING_CODE}_5`,
    subject: SUBJECT,
    reading: READING_CODE,
    readingTitle: READING_TITLE,
    readingTitleJa: READING_TITLE_JA,
    section: '5',
    title: 'Revenue Analysis',
    titleJa: '収益分析',
    content: 'Revenue analysis examines the sources, quality, and sustainability of a companys revenues. Key considerations include revenue recognition policies, revenue mix, customer concentration, and recurring vs. non-recurring revenue.',
    contentJa: '収益分析は、企業の収益の源泉、質、持続可能性を調べます。主な考慮事項には、収益認識方針、収益ミックス、顧客集中度、経常収益と非経常収益があります。',
    keyPoints: [
      'Revenue quality affects earnings sustainability',
      'Customer concentration is a risk factor',
      'Recurring revenue is more predictable',
    ],
    keyPointsJa: [
      '収益の質は利益の持続可能性に影響する',
      '顧客集中度はリスク要因',
      '経常収益はより予測可能',
    ],
    checkQuestions: [
      {
        id: `${SUBJECT}_${READING_CODE}_5_Q1`,
        contentId: `${SUBJECT}_${READING_CODE}_5`,
        question: 'Why is recurring revenue considered more valuable?',
        questionJa: 'なぜ経常収益はより価値があると考えられますか？',
        answer: 'Because it is more predictable and sustainable than non-recurring revenue.',
        answerJa: '非経常収益よりも予測可能で持続可能だから。',
        order: 1,
      },
    ],
    order: 5,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: `${SUBJECT}_${READING_CODE}_6`,
    subject: SUBJECT,
    reading: READING_CODE,
    readingTitle: READING_TITLE,
    readingTitleJa: READING_TITLE_JA,
    section: '6',
    title: 'Profitability Analysis',
    titleJa: '収益性分析',
    content: 'Profitability analysis examines a companys ability to generate profits. Key metrics include gross margin, operating margin, net profit margin, return on assets (ROA), and return on equity (ROE). DuPont analysis decomposes ROE into its component parts.',
    contentJa: '収益性分析は、企業が利益を生み出す能力を調べます。主要な指標には、粗利益率、営業利益率、純利益率、総資産利益率（ROA）、自己資本利益率（ROE）があります。デュポン分析はROEをその構成要素に分解します。',
    keyPoints: [
      'Margins measure profitability at different levels',
      'ROE is a key measure of shareholder returns',
      'DuPont analysis breaks down ROE components',
    ],
    keyPointsJa: [
      'マージンは異なるレベルでの収益性を測定',
      'ROEは株主リターンの主要な指標',
      'デュポン分析はROEの構成要素を分解',
    ],
    checkQuestions: [
      {
        id: `${SUBJECT}_${READING_CODE}_6_Q1`,
        contentId: `${SUBJECT}_${READING_CODE}_6`,
        question: 'What is DuPont analysis?',
        questionJa: 'デュポン分析とは何ですか？',
        answer: 'A method that decomposes ROE into profit margin, asset turnover, and financial leverage.',
        answerJa: 'ROEを利益率、資産回転率、財務レバレッジに分解する手法。',
        order: 1,
      },
    ],
    order: 6,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: `${SUBJECT}_${READING_CODE}_7`,
    subject: SUBJECT,
    reading: READING_CODE,
    readingTitle: READING_TITLE,
    readingTitleJa: READING_TITLE_JA,
    section: '7',
    title: 'Cash Flow Analysis',
    titleJa: 'キャッシュフロー分析',
    content: 'Cash flow analysis examines the sources and uses of cash. The cash flow statement is divided into operating, investing, and financing activities. Free cash flow (FCF) represents cash available after capital expenditures.',
    contentJa: 'キャッシュフロー分析は、現金の源泉と使途を調べます。キャッシュフロー計算書は、営業活動、投資活動、財務活動に分けられます。フリーキャッシュフロー（FCF）は、設備投資後に利用可能な現金を表します。',
    keyPoints: [
      'Cash flow statement has three sections',
      'Free cash flow is key for valuation',
      'Operating cash flow indicates business health',
    ],
    keyPointsJa: [
      'キャッシュフロー計算書には3つのセクションがある',
      'フリーキャッシュフローはバリュエーションの鍵',
      '営業キャッシュフローは事業の健全性を示す',
    ],
    checkQuestions: [
      {
        id: `${SUBJECT}_${READING_CODE}_7_Q1`,
        contentId: `${SUBJECT}_${READING_CODE}_7`,
        question: 'What is free cash flow?',
        questionJa: 'フリーキャッシュフローとは何ですか？',
        answer: 'Cash available after capital expenditures, representing cash that can be distributed to investors.',
        answerJa: '設備投資後に利用可能な現金で、投資家に分配できる現金を表す。',
        order: 1,
      },
    ],
    order: 7,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: `${SUBJECT}_${READING_CODE}_8`,
    subject: SUBJECT,
    reading: READING_CODE,
    readingTitle: READING_TITLE,
    readingTitleJa: READING_TITLE_JA,
    section: '8',
    title: 'Quality of Earnings',
    titleJa: '利益の質',
    content: 'Quality of earnings refers to how well reported earnings reflect the true economic performance of a company. High-quality earnings are sustainable, backed by cash flows, and not inflated by aggressive accounting. Red flags include large accruals, frequent one-time items, and revenue recognition issues.',
    contentJa: '利益の質とは、報告された利益が企業の真の経済的パフォーマンスをどれだけ反映しているかを指します。高品質な利益は持続可能で、キャッシュフローに裏付けられ、積極的な会計処理によって膨らんでいません。警告サインには、大きな発生項目、頻繁な一時的項目、収益認識の問題があります。',
    keyPoints: [
      'High-quality earnings are sustainable and cash-backed',
      'Large accruals may indicate low earnings quality',
      'Aggressive accounting can inflate earnings',
    ],
    keyPointsJa: [
      '高品質な利益は持続可能でキャッシュに裏付けられている',
      '大きな発生項目は低い利益の質を示す可能性がある',
      '積極的な会計処理は利益を膨らませる可能性がある',
    ],
    checkQuestions: [
      {
        id: `${SUBJECT}_${READING_CODE}_8_Q1`,
        contentId: `${SUBJECT}_${READING_CODE}_8`,
        question: 'What are signs of low earnings quality?',
        questionJa: '低い利益の質の兆候は何ですか？',
        answer: 'Large accruals, frequent one-time items, and aggressive revenue recognition.',
        answerJa: '大きな発生項目、頻繁な一時的項目、積極的な収益認識。',
        order: 1,
      },
    ],
    order: 8,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
];

/**
 * 例題
 */
export const reading5Examples: ExampleProblem[] = [
  {
    id: `${SUBJECT}_${READING_CODE}_EX1`,
    subject: SUBJECT,
    reading: READING_CODE,
    readingTitle: READING_TITLE,
    readingTitleJa: READING_TITLE_JA,
    exampleNumber: 1,
    title: 'Porters Five Forces Analysis',
    titleJa: 'ポーターのファイブフォース分析',
    problem: 'Which of Porters Five Forces would be most affected by a government decision to remove import tariffs on competing products?',
    problemJa: 'ポーターのファイブフォースのうち、競合製品の輸入関税を撤廃するという政府の決定によって最も影響を受けるのはどれですか？',
    solution: 'Threat of new entrants and rivalry among existing competitors.',
    solutionJa: '新規参入の脅威と既存競合他社間の競争。',
    explanation: 'Removing import tariffs reduces barriers to entry for foreign competitors and increases rivalry by allowing more competitors to enter the market.',
    explanationJa: '輸入関税の撤廃は外国の競合他社の参入障壁を下げ、より多くの競合他社が市場に参入できるようになることで競争を激化させます。',
    relatedSection: '2',
    difficulty: 'medium',
    order: 1,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: `${SUBJECT}_${READING_CODE}_EX2`,
    subject: SUBJECT,
    reading: READING_CODE,
    readingTitle: READING_TITLE,
    readingTitleJa: READING_TITLE_JA,
    exampleNumber: 2,
    title: 'DuPont Analysis',
    titleJa: 'デュポン分析',
    problem: 'A company has ROE of 15%, net profit margin of 5%, and asset turnover of 2.0. What is the companys financial leverage ratio?',
    problemJa: 'ある企業のROEは15%、純利益率は5%、資産回転率は2.0です。この企業の財務レバレッジ比率はいくらですか？',
    solution: 'ROE = Net Profit Margin x Asset Turnover x Financial Leverage. 15% = 5% x 2.0 x Financial Leverage. Financial Leverage = 15% / (5% x 2.0) = 15% / 10% = 1.5',
    solutionJa: 'ROE = 純利益率 x 資産回転率 x 財務レバレッジ。15% = 5% x 2.0 x 財務レバレッジ。財務レバレッジ = 15% / (5% x 2.0) = 15% / 10% = 1.5',
    explanation: 'The DuPont formula breaks down ROE into three components. By rearranging the formula, we can solve for any unknown component.',
    explanationJa: 'デュポンの公式はROEを3つの構成要素に分解します。公式を並べ替えることで、未知の構成要素を求めることができます。',
    relatedSection: '6',
    difficulty: 'medium',
    order: 2,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: `${SUBJECT}_${READING_CODE}_EX3`,
    subject: SUBJECT,
    reading: READING_CODE,
    readingTitle: READING_TITLE,
    readingTitleJa: READING_TITLE_JA,
    exampleNumber: 3,
    title: 'Free Cash Flow Calculation',
    titleJa: 'フリーキャッシュフローの計算',
    problem: 'Calculate free cash flow to the firm (FCFF) given: Net income: $100 million, Depreciation: $20 million, Capital expenditures: $30 million, Increase in working capital: $10 million, Interest expense: $15 million, Tax rate: 30%.',
    problemJa: '以下の情報からフリーキャッシュフロー（FCFF）を計算してください：純利益：1億ドル、減価償却費：2,000万ドル、設備投資：3,000万ドル、運転資本の増加：1,000万ドル、支払利息：1,500万ドル、税率：30%。',
    solution: 'FCFF = Net Income + Depreciation + Interest(1-Tax) - CapEx - Change in WC = $100M + $20M + $15M(1-0.30) - $30M - $10M = $100M + $20M + $10.5M - $30M - $10M = $90.5 million',
    solutionJa: 'FCFF = 純利益 + 減価償却費 + 支払利息(1-税率) - 設備投資 - 運転資本の変化 = 1億ドル + 2,000万ドル + 1,500万ドル(1-0.30) - 3,000万ドル - 1,000万ドル = 1億ドル + 2,000万ドル + 1,050万ドル - 3,000万ドル - 1,000万ドル = 9,050万ドル',
    explanation: 'FCFF represents cash available to all capital providers (debt and equity). We add back after-tax interest because FCFF is before financing costs.',
    explanationJa: 'FCFFはすべての資本提供者（負債と株式）に利用可能な現金を表します。FCFFは財務コスト前であるため、税引後利息を加算します。',
    relatedSection: '7',
    difficulty: 'hard',
    order: 3,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: `${SUBJECT}_${READING_CODE}_EX4`,
    subject: SUBJECT,
    reading: READING_CODE,
    readingTitle: READING_TITLE,
    readingTitleJa: READING_TITLE_JA,
    exampleNumber: 4,
    title: 'Earnings Quality Assessment',
    titleJa: '利益の質の評価',
    problem: 'A company reports net income of $50 million but operating cash flow of only $20 million. What does this suggest about earnings quality?',
    problemJa: 'ある企業は純利益5,000万ドルを報告していますが、営業キャッシュフローは2,000万ドルしかありません。これは利益の質について何を示唆していますか？',
    solution: 'This suggests potentially low earnings quality.',
    solutionJa: 'これは潜在的に低い利益の質を示唆しています。',
    explanation: 'When net income significantly exceeds operating cash flow, it indicates large accruals. This could mean aggressive revenue recognition, delayed expense recognition, or other accounting choices that inflate reported earnings.',
    explanationJa: '純利益が営業キャッシュフローを大幅に上回る場合、大きな発生項目があることを示します。これは積極的な収益認識、費用認識の遅延、または報告利益を膨らませるその他の会計選択を意味する可能性があります。',
    relatedSection: '8',
    difficulty: 'medium',
    order: 4,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: `${SUBJECT}_${READING_CODE}_EX5`,
    subject: SUBJECT,
    reading: READING_CODE,
    readingTitle: READING_TITLE,
    readingTitleJa: READING_TITLE_JA,
    exampleNumber: 5,
    title: 'Competitive Advantage Analysis',
    titleJa: '競争優位性分析',
    problem: 'A pharmaceutical company has patents that will not expire for 15 years, high R&D spending, and strong brand recognition. What type of economic moat does this company likely have?',
    problemJa: 'ある製薬会社は15年間有効な特許、高いR&D支出、強力なブランド認知度を持っています。この企業はどのような経済的堀を持っている可能性がありますか？',
    solution: 'The company has multiple sources of economic moat: intangible assets (patents, brand), and high barriers to entry (R&D requirements).',
    solutionJa: 'この企業は複数の経済的堀の源泉を持っています：無形資産（特許、ブランド）、高い参入障壁（R&D要件）。',
    explanation: 'Patents provide legal protection from competition. Strong brands create customer loyalty. High R&D requirements make it difficult for new entrants to compete.',
    explanationJa: '特許は競争からの法的保護を提供します。強力なブランドは顧客ロイヤルティを生み出します。高いR&D要件は新規参入者が競争することを困難にします。',
    relatedSection: '3',
    difficulty: 'medium',
    order: 5,
    createdAt: new Date(),
    updatedAt: new Date(),
  },
];


export default {
  info: reading5Info,
  texts: reading5Texts,
  examples: reading5Examples,
};
